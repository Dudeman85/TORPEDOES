<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tiimi Arkade: Sprite Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tiimi Arkade<span id="projectnumber">&#160;0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md__c_1_2_users_2matia_2source_2repos_2tiimiarkade_2team5_2doc_2_class_01_references_2_sprite_01_reference.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Sprite Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md33"></a> </p>
<h2><a class="anchor" id="autotoc_md34"></a>
<em><b>The default Animation and Render systems are members of the EngineLib class! All related components and functions are within the engine namespace!</b></em></h2>
<hr  />
 <h1><a class="anchor" id="autotoc_md36"></a>
Textures</h1>
<p>Textures are OpenGL textures. They are what get rendered when drawing sprites.<br  />
 You can load a texture straight from a file, or from an Image. You can also specify the filtering type, such as nearest for pixel art an linear for others. </p><div class="fragment"><div class="line"><span class="comment">//Load a texture from file</span></div>
<div class="line"><a class="code hl_struct" href="struct_texture.html">Texture</a> <a class="code hl_variable" href="_open_g_l_8cpp.html#a8b782273bb3cf7466013a0917b51d670">texture</a>(<span class="stringliteral">&quot;gradient.png&quot;</span>, <a class="code hl_define" href="gl_8h.html#a7ec02582a9b1c390908a2230c8e26c0b">GL_NEAREST</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//You can also change the filtering mode</span></div>
<div class="line"><a class="code hl_variable" href="_open_g_l_8cpp.html#a8b782273bb3cf7466013a0917b51d670">texture</a>.SetScalingfilter(<a class="code hl_define" href="gl_8h.html#a4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a>);</div>
<div class="ttc" id="a_open_g_l_8cpp_html_a8b782273bb3cf7466013a0917b51d670"><div class="ttname"><a href="_open_g_l_8cpp.html#a8b782273bb3cf7466013a0917b51d670">texture</a></div><div class="ttdeci">GLuint texture</div><div class="ttdef"><b>Definition</b> OpenGL.cpp:219</div></div>
<div class="ttc" id="agl_8h_html_a4e682f218130b98b27a1e33fa7325080"><div class="ttname"><a href="gl_8h.html#a4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a></div><div class="ttdeci">#define GL_LINEAR</div><div class="ttdef"><b>Definition</b> gl.h:665</div></div>
<div class="ttc" id="agl_8h_html_a7ec02582a9b1c390908a2230c8e26c0b"><div class="ttname"><a href="gl_8h.html#a7ec02582a9b1c390908a2230c8e26c0b">GL_NEAREST</a></div><div class="ttdeci">#define GL_NEAREST</div><div class="ttdef"><b>Definition</b> gl.h:823</div></div>
<div class="ttc" id="astruct_texture_html"><div class="ttname"><a href="struct_texture.html">Texture</a></div><div class="ttdef"><b>Definition</b> Mesh.h:21</div></div>
</div><!-- fragment --><p>If you have a spritesheet that you wish to slice into multiple textures: </p><div class="fragment"><div class="line"><span class="comment">//Create multiple textures from a spritesheet, going from top-left to bottom-right.</span></div>
<div class="line"><span class="comment">//The parameters are: path to image, how many sprites wide, and how many sprites tall.</span></div>
<div class="line">std::vector&lt;Texture*&gt; <a class="code hl_variable" href="_open_g_l_8cpp.html#afe64ba8692ed29b0538cc05eadf3b9bb">textures</a> = SliceSpritesheet(<span class="stringliteral">&quot;spritesheet.png&quot;</span>, 4, 6);</div>
<div class="ttc" id="a_open_g_l_8cpp_html_afe64ba8692ed29b0538cc05eadf3b9bb"><div class="ttname"><a href="_open_g_l_8cpp.html#afe64ba8692ed29b0538cc05eadf3b9bb">textures</a></div><div class="ttdeci">const GLuint * textures</div><div class="ttdef"><b>Definition</b> OpenGL.cpp:224</div></div>
</div><!-- fragment --><p>It is important to note that the origin of OpenGL textures is the bottom left, so when creating a texture from an image it is automatically flipped. There is no way to create an image out of a texture.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md38"></a>
Sprite</h1>
<p>The sprite component only contains a pointer to a texture and optionally a pointer to a shader.<br  />
 Every sprite can be drawn with a different shader if desired. If no shader is specified the default is used.<br  />
 All entities with the Sprite component will be drawn by the RenderSystem as long as they also have the Transform component. </p><div class="fragment"><div class="line"><span class="comment">//Create a new entity</span></div>
<div class="line">Entity sprite = <a class="code hl_variable" href="sandbox2_2_player_controller_8h.html#a59552d391b0b6d46790d2d82701a2a4a">ecs</a>.newEntity();</div>
<div class="line"><span class="comment">//Add the sprite component with a texture and default shader</span></div>
<div class="line"><a class="code hl_variable" href="sandbox2_2_player_controller_8h.html#a59552d391b0b6d46790d2d82701a2a4a">ecs</a>.addComponent(sprite, Sprite{&amp;<a class="code hl_variable" href="_open_g_l_8cpp.html#a8b782273bb3cf7466013a0917b51d670">texture</a>});</div>
<div class="line"><span class="comment">//Add the transform component which is required for the Render System</span></div>
<div class="line"><a class="code hl_variable" href="sandbox2_2_player_controller_8h.html#a59552d391b0b6d46790d2d82701a2a4a">ecs</a>.addComponent(sprite, Transform{.x = 100, .y = 40});</div>
<div class="ttc" id="asandbox2_2_player_controller_8h_html_a59552d391b0b6d46790d2d82701a2a4a"><div class="ttname"><a href="sandbox2_2_player_controller_8h.html#a59552d391b0b6d46790d2d82701a2a4a">ecs</a></div><div class="ttdeci">ECS ecs</div></div>
</div><!-- fragment --><p>To render the sprite you need to update the render system every frame </p><div class="fragment"><div class="line"><span class="comment">//Render system update needs camera</span></div>
<div class="line">renderSystem-&gt;Update(&amp;cam);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Or, to update all engine systems</span></div>
<div class="line"><a class="code hl_namespace" href="namespaceengine.html">engine</a>.Update(&amp;cam);</div>
<div class="ttc" id="anamespaceengine_html"><div class="ttname"><a href="namespaceengine.html">engine</a></div><div class="ttdef"><b>Definition</b> Application.h:21</div></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="autotoc_md40"></a>
Images</h1>
<p>An image is just a 2D vector of Pixels containing red, green, blue, and alpha values.<br  />
 To load an image from a file you can use the Image class constructor. You can then convert the image to a texture, if you want to display it as a sprite. </p><div class="fragment"><div class="line"><span class="comment">//Load a new image</span></div>
<div class="line">Image testImage(<span class="stringliteral">&quot;image.png&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Create a texture from an image</span></div>
<div class="line"><a class="code hl_struct" href="struct_texture.html">Texture</a> texture2(testImage, <a class="code hl_define" href="gl_8h.html#a4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a>);</div>
</div><!-- fragment --><p>You can index the image to get a specific pixel. An images origin is its top left corner. </p><div class="fragment"><div class="line"><span class="comment">//Get the pxel at position (x, y)</span></div>
<div class="line">Pixel pixel = testImage[<a class="code hl_variable" href="simple_8c.html#aca70cc1e1baa809c00f9f8bffe935a91">x</a>][<a class="code hl_variable" href="simple_8c.html#ae2cad7d6233fb389cf2e3b6aaf77b997">y</a>];</div>
<div class="ttc" id="asimple_8c_html_aca70cc1e1baa809c00f9f8bffe935a91"><div class="ttname"><a href="simple_8c.html#aca70cc1e1baa809c00f9f8bffe935a91">x</a></div><div class="ttdeci">float x</div><div class="ttdef"><b>Definition</b> simple.c:38</div></div>
<div class="ttc" id="asimple_8c_html_ae2cad7d6233fb389cf2e3b6aaf77b997"><div class="ttname"><a href="simple_8c.html#ae2cad7d6233fb389cf2e3b6aaf77b997">y</a></div><div class="ttdeci">float y</div><div class="ttdef"><b>Definition</b> simple.c:38</div></div>
</div><!-- fragment --><p>You can also slice a sub-image from an image: </p><div class="fragment"><div class="line"><span class="comment">//Get a slice of testImage from (x1, y1) to (x2, y2). Both are inclusive</span></div>
<div class="line">Image slice = testImage.Slice(x1, y1, x2, y2);</div>
</div><!-- fragment --><p>The image class has members for width and height. These should only be read from and not modified unless absolutely sure. </p><div class="fragment"><div class="line"><span class="comment">//Image width and height members</span></div>
<div class="line">testImage.width;</div>
<div class="line">testImage.height;</div>
</div><!-- fragment --><p>To get the image data in a more universal format (unsigned char*) you can use the data function </p><div class="fragment"><div class="line"><span class="comment">//This is the format used by stb image</span></div>
<div class="line"><span class="comment">//Each color chanel is stored in a 1 byte char, the stride betwen pixels is 4 bytes for r, g, b, and a</span></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* imageData = testImage.data();</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="autotoc_md42"></a>
Animations</h1>
<p>The AnimationSystem requires the Sprite and Animator components:</p>
<div class="fragment"><div class="line"><span class="comment">//Add the Animator and Sprite components to the sprite entity</span></div>
<div class="line"><a class="code hl_variable" href="sandbox2_2_player_controller_8h.html#a59552d391b0b6d46790d2d82701a2a4a">ecs</a>.addComponent(sprite, Sprite{});</div>
<div class="line"><a class="code hl_variable" href="sandbox2_2_player_controller_8h.html#a59552d391b0b6d46790d2d82701a2a4a">ecs</a>.addComponent(sprite, Animator{});</div>
</div><!-- fragment --><p>An animation is simply a list of textures to be used as frames and a list of ints to be used as delays in milliseconds.<br  />
 You can manually create it from textures, or automatically create it from a spritesheet. <br  />
</p>
<p>The automatic way: </p><div class="fragment"><div class="line"><span class="comment">//Create animations from a spritesheet where one animation contains all the textures from one row of the spritesheet</span></div>
<div class="line"><span class="comment">//The parameters are: the path to the image, how many sprites wide, how many sprites tall, and a vector of delays for each frame</span></div>
<div class="line">std::vector&lt;Animation&gt; anims = AnimationsFromSpritesheet(<span class="stringliteral">&quot;spritesheet.png&quot;</span>, 4, 6, vector&lt;int&gt;(24, 250));</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Add the first animation, aka the first row, created from the spritesheet</span></div>
<div class="line"><span class="comment">//This has essentially the same results as the above example</span></div>
<div class="line">AnimationSystem::AddAnimation(sprite, anims[0], <span class="stringliteral">&quot;Animation 2&quot;</span>);</div>
</div><!-- fragment --><p>The manual way: </p><div class="fragment"><div class="line"><span class="comment">//Create multiple textures from a spritesheet, or load them from images.</span></div>
<div class="line">std::vector&lt;Texture*&gt; slicedTextures = SliceSpritesheet(<span class="stringliteral">&quot;spritesheet.png&quot;</span>, 4, 6);</div>
<div class="line"><span class="comment">//Copy the first row of the spritesheet to a new vector</span></div>
<div class="line">std::vector&lt;Texture*&gt; <a class="code hl_variable" href="_open_g_l_8cpp.html#afe64ba8692ed29b0538cc05eadf3b9bb">textures</a>(4);</div>
<div class="line">std::copy(slicedTextures.begin(), slicedTextures.begin() + 4, <a class="code hl_variable" href="_open_g_l_8cpp.html#afe64ba8692ed29b0538cc05eadf3b9bb">textures</a>.begin());</div>
<div class="line"><span class="comment">//Create a vector of delays with each delay being 250ms</span></div>
<div class="line">std::vector&lt;int&gt; delays(4, 250);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Create the animation</span></div>
<div class="line">Animation anim = Animation(<a class="code hl_variable" href="_open_g_l_8cpp.html#afe64ba8692ed29b0538cc05eadf3b9bb">textures</a>, delays);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Add the anim animation with the name &quot;Animation 1&quot; to the sprite entity</span></div>
<div class="line">AnimationSystem::AddAnimation(sprite, anim, <span class="stringliteral">&quot;Animation 1&quot;</span>);</div>
</div><!-- fragment --><p>Animation control: </p><div class="fragment"><div class="line"><span class="comment">//Start playing an animation named &quot;Animation 1&quot;, without looping</span></div>
<div class="line">AnimationSystem::PlayAnimation(sprite, <span class="stringliteral">&quot;Animation 1&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><span class="comment">//Stop playing the currently playing animation</span></div>
<div class="line">AnimationSystem::StopAnimation(sprite);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Get the sprite entity&#39;s Animator component</span></div>
<div class="line">Animator animator = <a class="code hl_variable" href="sandbox2_2_player_controller_8h.html#a59552d391b0b6d46790d2d82701a2a4a">ecs</a>.getComponent&lt;Animator&gt;(sprite);</div>
<div class="line"><span class="comment">//The animator component has members which can be used to get its current state.</span></div>
<div class="line"><span class="comment">//These should not be directly modified unless you know what you&#39;re doing. </span></div>
<div class="line"><span class="comment">//For example if you wanted to temporarily pause the animation you could change playingAnimation to false.</span></div>
<div class="line">animator.currentAnimation;</div>
<div class="line">animator.animationFrame;</div>
<div class="line">animator.repeatAnimation;</div>
<div class="line">animator.playingAnimation;</div>
<div class="line">animator.animationTimer;</div>
</div><!-- fragment --><p>As with most ECS systems, Animator functions that operate upon only one entity don't usually need to be members of the system class. However here they are static members for the sake of organization. </p><div class="fragment"><div class="line"><span class="comment">//These are equivalent</span></div>
<div class="line">AnimationSystem::AddAnimation(sprite, anim, <span class="stringliteral">&quot;Animation 1&quot;</span>);</div>
<div class="line"><a class="code hl_namespace" href="namespaceengine.html">engine</a>.animationSystem-&gt;AddAnimation(sprite, anim, <span class="stringliteral">&quot;Animation 1&quot;</span>);</div>
</div><!-- fragment --><p>Update the animation system every frame: </p><div class="fragment"><div class="line"><span class="comment">//Animation system update function needs deltaTime</span></div>
<div class="line">animationSystem-&gt;Update(<a class="code hl_namespace" href="namespaceengine.html">engine</a>.deltaTime);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Or, to update all engine systems</span></div>
<div class="line"><a class="code hl_namespace" href="namespaceengine.html">engine</a>.Update(&amp;cam);</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="autotoc_md44"></a>
Shaders</h1>
<p>Shaders determine how a sprite or other object is rendered. Shaders are written in glsl. <br  />
 You can write your own fragment and vertex shaders and compile them to a shader with the Shader class. This is not needed for basic sprite rendering. </p><div class="fragment"><div class="line"><span class="comment">//Create a new shader by loading the fragment and vertex shaders from file</span></div>
<div class="line"><span class="comment">//Leaving either of these empty will use the default shader for that type</span></div>
<div class="line">Shader <a class="code hl_variable" href="_open_g_l_8cpp.html#af81c823ed562dc5eec5d2b361ce9746a">shader</a> = Shader(<span class="stringliteral">&quot;vertexShader.glsl&quot;</span>, <span class="stringliteral">&quot;fragmentShader.glsl&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Apply this shader to a sprite component</span></div>
<div class="line">Sprite&amp; spriteComponent = <a class="code hl_variable" href="sandbox2_2_player_controller_8h.html#a59552d391b0b6d46790d2d82701a2a4a">ecs</a>.getComponent&lt;Sprite&gt;(sprite);</div>
<div class="line">spriteComponent.shader = &amp;<a class="code hl_variable" href="_open_g_l_8cpp.html#af81c823ed562dc5eec5d2b361ce9746a">shader</a>;</div>
<div class="ttc" id="a_open_g_l_8cpp_html_af81c823ed562dc5eec5d2b361ce9746a"><div class="ttname"><a href="_open_g_l_8cpp.html#af81c823ed562dc5eec5d2b361ce9746a">shader</a></div><div class="ttdeci">GLuint shader</div><div class="ttdef"><b>Definition</b> OpenGL.cpp:278</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
