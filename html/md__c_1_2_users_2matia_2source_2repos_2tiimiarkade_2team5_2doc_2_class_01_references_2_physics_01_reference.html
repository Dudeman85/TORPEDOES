<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tiimi Arkade: Physics Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tiimi Arkade<span id="projectnumber">&#160;0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md__c_1_2_users_2matia_2source_2repos_2tiimiarkade_2team5_2doc_2_class_01_references_2_physics_01_reference.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Physics Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md23"></a> </p>
<h2><a class="anchor" id="autotoc_md24"></a>
<em><b>The default Physics system is a member of the EngineLib class! All related components and functions are within the engine namespace!</b></em></h2>
<hr  />
 <h1><a class="anchor" id="autotoc_md26"></a>
Transform</h1>
<p>To understand physics, you need to know how Transform works.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md28"></a>
Rigidbody</h1>
<p>The Rigidbody component contain all the physics material properties of the entity: </p><div class="fragment"><div class="line"><span class="comment">//Rigidbody component</span></div>
<div class="line"><span class="keyword">struct </span>Rigidbody</div>
<div class="line">    {</div>
<div class="line">    Vector3 velocity;</div>
<div class="line">    <span class="keywordtype">float</span> mass = 1;</div>
<div class="line">    <span class="keywordtype">float</span> gravityScale = 1;</div>
<div class="line">    <span class="comment">//How much linear drag should be applied between 0-1 </span></div>
<div class="line">    <span class="keywordtype">float</span> drag = 0;</div>
<div class="line">    <span class="comment">//Aka bounciness how much velocity will be preserved after a collision between 0-1</span></div>
<div class="line">    <span class="keywordtype">float</span> restitution = 1;</div>
<div class="line">    <span class="comment">//If true, this will not be effected by outside forces calculations</span></div>
<div class="line">    <span class="keywordtype">bool</span> kinematic = <span class="keyword">false</span>;</div>
<div class="line">};</div>
</div><!-- fragment --><p>Using the Rigidbody component: </p><div class="fragment"><div class="line"><span class="comment">//Add the Rigidbody component</span></div>
<div class="line">Rigidbody&amp; rigidbody = <a class="code hl_variable" href="sandbox2_2_player_controller_8h.html#a59552d391b0b6d46790d2d82701a2a4a">ecs</a>.addComponent(entity, Rigidbody{ .mass = 100, .drag = 0.05, .bounciness = 0.125 });</div>
<div class="line"><span class="comment">//Get the Rigidbody component</span></div>
<div class="line">Rigidbody&amp; rigidbody = <a class="code hl_variable" href="sandbox2_2_player_controller_8h.html#a59552d391b0b6d46790d2d82701a2a4a">ecs</a>.getComponent&lt;Rigidbody&gt;(entity);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//You can read and write to members directly with no negatives</span></div>
<div class="line">Vector3 velocity = rigidbody.velocity;</div>
<div class="line">rigidbody.drag = 0.1;</div>
<div class="ttc" id="asandbox2_2_player_controller_8h_html_a59552d391b0b6d46790d2d82701a2a4a"><div class="ttname"><a href="sandbox2_2_player_controller_8h.html#a59552d391b0b6d46790d2d82701a2a4a">ecs</a></div><div class="ttdeci">ECS ecs</div></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="autotoc_md30"></a>
PhysicsSystem</h1>
<p><u>Requires the Transform and Rigidbody components.</u></p>
<p>The Physics System is in charge of applying forces on entities, updating the entity's position based on its velocity, and resolving collisions.</p>
<p>Moving entities can be done directly. The PhysicsSystem::Move() method is used to move an entity while checking collision, as opposed to Transform::Translate() which does not check collision. Impulse can be used to add velocity to a Rigidbody. If you want to add velocity every frame remember to multiply by deltaTime. </p><div class="fragment"><div class="line"><span class="comment">//Move the entity while checking collision, most physics calculations should be done with respect to deltaTime</span></div>
<div class="line">PhysicsSystem::Move(player, Vector3(0, 300, 0) * <a class="code hl_namespace" href="namespaceengine.html">engine</a>.deltaTime);</div>
<div class="line"><span class="comment">//Add an impulse to entity</span></div>
<div class="line">PhysicsSystem::Impulse(player, Vector3(100, 100, 100) * <a class="code hl_namespace" href="namespaceengine.html">engine</a>.deltaTime);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Set the gravity</span></div>
<div class="line"><a class="code hl_namespace" href="namespaceengine.html">engine</a>.physicsSystem-&gt;gravity = Vector3(0, -9.81, 0);</div>
<div class="ttc" id="anamespaceengine_html"><div class="ttname"><a href="namespaceengine.html">engine</a></div><div class="ttdef"><b>Definition</b> Application.h:21</div></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="autotoc_md32"></a>
PolygonCollider</h1>
<p>The Polygon Collider component is the hitbox of an entity. It can be comprised of as many vertices as desired, but it must be concave. The CollisionSystem automatically updates the bounding box for performance.</p>
<div class="fragment"><div class="line"><span class="comment">//Polygon Collider component</span></div>
<div class="line"><span class="keyword">struct </span>PolygonCollider</div>
<div class="line">{</div>
<div class="line">    <span class="comment">//The vertices of the polygon making up the collider, going clockwise</span></div>
<div class="line">    <span class="comment">//The vertices must form a convex polygon</span></div>
<div class="line">    std::vector&lt;Vector2&gt; vertices;</div>
<div class="line">    <span class="comment">//The axis-aligned bounding box of the collider</span></div>
<div class="line">    <span class="comment">//This is updated automatically and is set in world coordinates</span></div>
<div class="line">    std::array&lt;float, 4&gt; bounds;</div>
<div class="line">    <span class="comment">//Should the collider only act as a trigger, aka not be affected by physics</span></div>
<div class="line">    <span class="keywordtype">bool</span> trigger = <span class="keyword">false</span>;</div>
<div class="line">    <span class="comment">//Draw the collider vertices</span></div>
<div class="line">    <span class="keywordtype">bool</span> visualize = <span class="keyword">false</span>;</div>
<div class="line">    <span class="comment">//Callback function on collision</span></div>
<div class="line">    std::function&lt;<a class="code hl_function" href="_open_g_l_8cpp.html#ab04b372a6be9967fce180f0c5d024b75">void</a>(Collision)&gt; callback;</div>
<div class="line">};</div>
<div class="ttc" id="a_open_g_l_8cpp_html_ab04b372a6be9967fce180f0c5d024b75"><div class="ttname"><a href="_open_g_l_8cpp.html#ab04b372a6be9967fce180f0c5d024b75">void</a></div><div class="ttdeci">void(CODEGEN_FUNCPTR *_ptrc_glVertexAttribDivisorARB)(GLuint index</div></div>
</div><!-- fragment --><p>An entity with a PolygonCollider but not a Rigidbody will only check collision if trigger = true. The callback function will be called every collision or trigger and will have a Collision type parameter with information of the collision.</p>
<p>Using the Polygon Collider component: </p><div class="fragment"><div class="line"><span class="comment">//Define the callback function on collision, it doesn&#39;t have to be a lambda and it is not required</span></div>
<div class="line">std::function&lt;<a class="code hl_function" href="_open_g_l_8cpp.html#ab04b372a6be9967fce180f0c5d024b75">void</a>(Collision)&gt; OnCollision = [](Collision <a class="code hl_variable" href="afcover_8h.html#ac8dd749fb8241b9d98f7649618f4237a">c</a>)</div>
<div class="line">{</div>
<div class="line">    std::cout &lt;&lt; <a class="code hl_variable" href="afcover_8h.html#ac8dd749fb8241b9d98f7649618f4237a">c</a>.b;</div>
<div class="line">};</div>
<div class="line"><span class="comment">//Define the vertices of the collider, these should be in clockwise order</span></div>
<div class="line">vector&lt;Vector2&gt; colliderVerts{ Vector2(5, 5), Vector2(5, -5), Vector2(-5, -5), Vector2(-5, 5) };</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Add the PolygonCollider component, set it&#39;s vertices and callback function</span></div>
<div class="line">PolygonCollider&amp; collider = <a class="code hl_variable" href="sandbox2_2_player_controller_8h.html#a59552d391b0b6d46790d2d82701a2a4a">ecs</a>.addComponent(entity, PolygonCollider{ .vertices = colliderVerts, .callback = OnCollision });</div>
<div class="line"><span class="comment">//Get the PolygonCollider component</span></div>
<div class="line">PolygonCollider&amp; collider = <a class="code hl_variable" href="sandbox2_2_player_controller_8h.html#a59552d391b0b6d46790d2d82701a2a4a">ecs</a>.getComponent&lt;PolygonCollider&gt;(entity);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//You can change the vertices or other members whenever, but don&#39;t touch the bounds since they are updated automatically.</span></div>
<div class="line">collider.trigger = <span class="keyword">true</span>;</div>
<div class="line">collider.vertices = colliderVerts;</div>
<div class="ttc" id="aafcover_8h_html_ac8dd749fb8241b9d98f7649618f4237a"><div class="ttname"><a href="afcover_8h.html#ac8dd749fb8241b9d98f7649618f4237a">c</a></div><div class="ttdeci">small capitals from c</div><div class="ttdef"><b>Definition</b> afcover.h:41</div></div>
</div><!-- fragment --><p>As with most ECS systems, PhysicsSystem and CollisionSystem functions that operate upon only one entity don't usually need to be members of the system class. However here they are static members for the sake of organization. </p><div class="fragment"><div class="line"><span class="comment">//These are equivalent</span></div>
<div class="line">PhysicsSystem::Impulse(player, Vector3(100, 100, 100));</div>
<div class="line"><a class="code hl_namespace" href="namespaceengine.html">engine</a>.physicsSystem-&gt;Impulse(player, Vector3(100, 100, 100));</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
