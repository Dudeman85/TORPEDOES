<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tiimi Arkade: Tutorial</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tiimi Arkade<span id="projectnumber">&#160;0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_tutorial.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Tutorial</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="#Initialization">Initialization</a></p>
<p><a class="el" href="#CreateServer">Creating an ENet server</a></p>
<p><a class="el" href="#CreateClient">Creating an ENet client</a></p>
<p><a class="el" href="#ManageHost">Managing an ENet host</a></p>
<p><a class="el" href="#SendingPacket">Sending a packet to an ENet peer <br  />
</a></p>
<p><a class="el" href="#Disconnecting">Disconnecting an ENet peer</a></p>
<p><a class="el" href="#Connecting">Connecting to an ENet host</a></p>
<h1><a class="anchor" id="Initialization"></a>
Initialization</h1>
<p>You should include the file &lt;<a class="el" href="enet_8h.html" title="ENet public header file.">enet/enet.h</a>&gt; when using ENet. Do not include &lt;<a class="el" href="enet_8h.html" title="ENet public header file.">enet.h</a>&gt; without the directory prefix, as this may cause file name conflicts on some systems.</p>
<p>Before using ENet, you must call <a class="el" href="group__global.html#ga67fa85c46a1dc91f968f25fc0637c897">enet_initialize()</a> to initialize the library. Upon program exit, you should call <a class="el" href="group__global.html#gad62cf417e08a2b98d48572a336f7db25">enet_deinitialize()</a> so that the library may clean up any used resources.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="enet_8h.html">enet/enet.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> </div>
<div class="line"><a class="code hl_function" href="_test_inline_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> ** argv) </div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_function" href="group__global.html#ga67fa85c46a1dc91f968f25fc0637c897">enet_initialize</a> () != 0)</div>
<div class="line">    {</div>
<div class="line">        fprintf (stderr, <span class="stringliteral">&quot;An error occurred while initializing ENet.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">    }</div>
<div class="line">    atexit (<a class="code hl_function" href="group__global.html#gad62cf417e08a2b98d48572a336f7db25">enet_deinitialize</a>);</div>
<div class="line">    ...</div>
<div class="line">    ...</div>
<div class="line">    ...</div>
<div class="line">}</div>
<div class="ttc" id="a_test_inline_8c_html_a840291bc02cba5474a4cb46a9b9566fe"><div class="ttname"><a href="_test_inline_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a></div><div class="ttdeci">int main(void)</div><div class="ttdef"><b>Definition</b> TestInline.c:6</div></div>
<div class="ttc" id="aenet_8h_html"><div class="ttname"><a href="enet_8h.html">enet.h</a></div><div class="ttdoc">ENet public header file.</div></div>
<div class="ttc" id="agroup__global_html_ga67fa85c46a1dc91f968f25fc0637c897"><div class="ttname"><a href="group__global.html#ga67fa85c46a1dc91f968f25fc0637c897">enet_initialize</a></div><div class="ttdeci">ENET_API int enet_initialize(void)</div><div class="ttdef"><b>Definition</b> unix.c:67</div></div>
<div class="ttc" id="agroup__global_html_gad62cf417e08a2b98d48572a336f7db25"><div class="ttname"><a href="group__global.html#gad62cf417e08a2b98d48572a336f7db25">enet_deinitialize</a></div><div class="ttdeci">ENET_API void enet_deinitialize(void)</div><div class="ttdef"><b>Definition</b> unix.c:73</div></div>
</div><!-- fragment --><h1><a class="anchor" id="CreateServer"></a>
Creating an ENet server</h1>
<p>Servers in ENet are constructed with <a class="el" href="group__host.html#ga95b851cfb4a56aa3d760e5f974c66361">enet_host_create()</a>. You must specify an address on which to receive data and new connections, as well as the maximum allowable numbers of connected peers. You may optionally specify the incoming and outgoing bandwidth of the server in bytes per second so that ENet may try to statically manage bandwidth resources among connected peers in addition to its dynamic throttling algorithm; specifying 0 for these two options will cause ENet to rely entirely upon its dynamic throttling algorithm to manage bandwidth.</p>
<p>When done with a host, the host may be destroyed with <a class="el" href="group__host.html#gacec1e9a0b528c1f9ce30544d2d5b5b79">enet_host_destroy()</a>. All connected peers to the host will be reset, and the resources used by the host will be freed.</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="struct___e_net_address.html">ENetAddress</a> address;</div>
<div class="line"><a class="code hl_struct" href="struct___e_net_host.html">ENetHost</a> * server;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Bind the server to the default localhost.     */</span></div>
<div class="line"><span class="comment">/* A specific host address can be specified by   */</span></div>
<div class="line"><span class="comment">/* enet_address_set_host (&amp; address, &quot;x.x.x.x&quot;); */</span></div>
<div class="line"> </div>
<div class="line">address.<a class="code hl_variable" href="struct___e_net_address.html#ab4a3f4fe53031a0ea366a5e8c4c04b20">host</a> = <a class="code hl_define" href="enet_8h.html#a8a8ff0155e0f7dabaaa466ff9b356d2c">ENET_HOST_ANY</a>;</div>
<div class="line"><span class="comment">/* Bind the server to port 1234. */</span></div>
<div class="line">address.<a class="code hl_variable" href="struct___e_net_address.html#ad0f4850b0e76550370be06eee67bbc54">port</a> = 1234;</div>
<div class="line"> </div>
<div class="line">server = <a class="code hl_function" href="group__host.html#ga95b851cfb4a56aa3d760e5f974c66361">enet_host_create</a> (&amp; address <span class="comment">/* the address to bind the server host to */</span>, </div>
<div class="line">                             32      <span class="comment">/* allow up to 32 clients and/or outgoing connections */</span>,</div>
<div class="line">                              2      <span class="comment">/* allow up to 2 channels to be used, 0 and 1 */</span>,</div>
<div class="line">                              0      <span class="comment">/* assume any amount of incoming bandwidth */</span>,</div>
<div class="line">                              0      <span class="comment">/* assume any amount of outgoing bandwidth */</span>);</div>
<div class="line"><span class="keywordflow">if</span> (server == <a class="code hl_define" href="miniaudio_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line">{</div>
<div class="line">    fprintf (stderr, </div>
<div class="line">             <span class="stringliteral">&quot;An error occurred while trying to create an ENet server host.\n&quot;</span>);</div>
<div class="line">    exit (EXIT_FAILURE);</div>
<div class="line">}</div>
<div class="line">...</div>
<div class="line">...</div>
<div class="line">...</div>
<div class="line">enet_host_destroy(server);</div>
<div class="ttc" id="aenet_8h_html_a8a8ff0155e0f7dabaaa466ff9b356d2c"><div class="ttname"><a href="enet_8h.html#a8a8ff0155e0f7dabaaa466ff9b356d2c">ENET_HOST_ANY</a></div><div class="ttdeci">#define ENET_HOST_ANY</div><div class="ttdef"><b>Definition</b> enet.h:75</div></div>
<div class="ttc" id="agroup__host_html_ga95b851cfb4a56aa3d760e5f974c66361"><div class="ttname"><a href="group__host.html#ga95b851cfb4a56aa3d760e5f974c66361">enet_host_create</a></div><div class="ttdeci">ENetHost * enet_host_create(const ENetAddress *address, size_t peerCount, size_t channelLimit, enet_uint32 incomingBandwidth, enet_uint32 outgoingBandwidth)</div><div class="ttdef"><b>Definition</b> host.c:29</div></div>
<div class="ttc" id="aminiaudio_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="miniaudio_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition</b> miniaudio.h:3761</div></div>
<div class="ttc" id="astruct___e_net_address_html"><div class="ttname"><a href="struct___e_net_address.html">_ENetAddress</a></div><div class="ttdef"><b>Definition</b> enet.h:90</div></div>
<div class="ttc" id="astruct___e_net_address_html_ab4a3f4fe53031a0ea366a5e8c4c04b20"><div class="ttname"><a href="struct___e_net_address.html#ab4a3f4fe53031a0ea366a5e8c4c04b20">_ENetAddress::host</a></div><div class="ttdeci">enet_uint32 host</div><div class="ttdef"><b>Definition</b> enet.h:91</div></div>
<div class="ttc" id="astruct___e_net_address_html_ad0f4850b0e76550370be06eee67bbc54"><div class="ttname"><a href="struct___e_net_address.html#ad0f4850b0e76550370be06eee67bbc54">_ENetAddress::port</a></div><div class="ttdeci">enet_uint16 port</div><div class="ttdef"><b>Definition</b> enet.h:92</div></div>
<div class="ttc" id="astruct___e_net_host_html"><div class="ttname"><a href="struct___e_net_host.html">_ENetHost</a></div><div class="ttdef"><b>Definition</b> enet.h:364</div></div>
</div><!-- fragment --><h1><a class="anchor" id="CreateClient"></a>
Creating an ENet client</h1>
<p>Clients in ENet are similarly constructed with <a class="el" href="group__host.html#ga95b851cfb4a56aa3d760e5f974c66361">enet_host_create()</a> when no address is specified to bind the host to. Bandwidth may be specified for the client host as in the above example. The peer count controls the maximum number of connections to other server hosts that may be simultaneously open.</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="struct___e_net_host.html">ENetHost</a> * client;</div>
<div class="line"> </div>
<div class="line">client = <a class="code hl_function" href="group__host.html#ga95b851cfb4a56aa3d760e5f974c66361">enet_host_create</a> (<a class="code hl_define" href="miniaudio_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> <span class="comment">/* create a client host */</span>,</div>
<div class="line">            1 <span class="comment">/* only allow 1 outgoing connection */</span>,</div>
<div class="line">            2 <span class="comment">/* allow up 2 channels to be used, 0 and 1 */</span>,</div>
<div class="line">            0 <span class="comment">/* assume any amount of incoming bandwidth */</span>,</div>
<div class="line">            0 <span class="comment">/* assume any amount of outgoing bandwidth */</span>);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (client == <a class="code hl_define" href="miniaudio_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line">{</div>
<div class="line">    fprintf (stderr, </div>
<div class="line">             <span class="stringliteral">&quot;An error occurred while trying to create an ENet client host.\n&quot;</span>);</div>
<div class="line">    exit (EXIT_FAILURE);</div>
<div class="line">}</div>
<div class="line">...</div>
<div class="line">...</div>
<div class="line">...</div>
<div class="line">enet_host_destroy(client);</div>
</div><!-- fragment --><h1><a class="anchor" id="ManageHost"></a>
Managing an ENet host</h1>
<p>ENet uses a polled event model to notify the programmer of significant events. ENet hosts are polled for events with <a class="el" href="group__host.html#ga6ba501b3ee576e5578c8e6d1694ebd49">enet_host_service()</a>, where an optional timeout value in milliseconds may be specified to control how long ENet will poll; if a timeout of 0 is specified, <a class="el" href="group__host.html#ga6ba501b3ee576e5578c8e6d1694ebd49">enet_host_service()</a> will return immediately if there are no events to dispatch. <a class="el" href="group__host.html#ga6ba501b3ee576e5578c8e6d1694ebd49">enet_host_service()</a> will return 1 if an event was dispatched within the specified timeout.</p>
<p>Beware that most processing of the network with the ENet stack is done inside <a class="el" href="group__host.html#ga6ba501b3ee576e5578c8e6d1694ebd49">enet_host_service()</a>. Both hosts that make up the sides of a connection must regularly call this function to ensure packets are actually sent and received. A common symptom of not actively calling <a class="el" href="group__host.html#ga6ba501b3ee576e5578c8e6d1694ebd49">enet_host_service()</a> on both ends is that one side receives events while the other does not. The best way to schedule this activity to ensure adequate service is, for example, to call <a class="el" href="group__host.html#ga6ba501b3ee576e5578c8e6d1694ebd49">enet_host_service()</a> with a 0 timeout (meaning non-blocking) at the beginning of every frame in a game loop.</p>
<p>Currently there are only four types of significant events in ENet:</p>
<p>An event of type ENET_EVENT_TYPE_NONE is returned if no event occurred within the specified time limit. <a class="el" href="group__host.html#ga6ba501b3ee576e5578c8e6d1694ebd49">enet_host_service()</a> will return 0 with this event.</p>
<p>An event of type ENET_EVENT_TYPE_CONNECT is returned when either a new client host has connected to the server host or when an attempt to establish a connection with a foreign host has succeeded. Only the "peer" field of the event structure is valid for this event and contains the newly connected peer.</p>
<p>An event of type ENET_EVENT_TYPE_RECEIVE is returned when a packet is received from a connected peer. The "peer" field contains the peer the packet was received from, "channelID" is the channel on which the packet was sent, and "packet" is the packet that was sent. The packet contained in the "packet" field must be destroyed with <a class="el" href="group___packet.html#gab58895376ee4ade8f4e13761a44ba263">enet_packet_destroy()</a> when you are done inspecting its contents.</p>
<p>An event of type ENET_EVENT_TYPE_DISCONNECT is returned when a connected peer has either explicitly disconnected or timed out. Only the "peer" field of the event structure is valid for this event and contains the peer that disconnected. Only the "data" field of the peer is still valid on a disconnect event and must be explicitly reset.</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="struct___e_net_event.html">ENetEvent</a> event;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Wait up to 1000 milliseconds for an event. */</span></div>
<div class="line"><span class="keywordflow">while</span> (<a class="code hl_function" href="group__host.html#ga6ba501b3ee576e5578c8e6d1694ebd49">enet_host_service</a> (client, &amp; event, 1000) &gt; 0)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span> (event.<a class="code hl_variable" href="struct___e_net_event.html#a53cd59a74e46de03e8f4b3fd47822d96">type</a>)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="enet_8h.html#a3cf937b5cf72510493e0a7a2b71d3755aefd9fa36297e41ca4c1cbcfdeb7e4a9d">ENET_EVENT_TYPE_CONNECT</a>:</div>
<div class="line">        <a class="code hl_function" href="octave__test_8m.html#ac6d0e62c65e5715b13a5fcb381118888">printf</a> (<span class="stringliteral">&quot;A new client connected from %x:%u.\n&quot;</span>, </div>
<div class="line">                event.<a class="code hl_variable" href="struct___e_net_event.html#ac991d0db800bc1c70b56ad63f1670140">peer</a> -&gt; address.<a class="code hl_variable" href="struct___e_net_address.html#ab4a3f4fe53031a0ea366a5e8c4c04b20">host</a>,</div>
<div class="line">                event.<a class="code hl_variable" href="struct___e_net_event.html#ac991d0db800bc1c70b56ad63f1670140">peer</a> -&gt; address.<a class="code hl_variable" href="struct___e_net_address.html#ad0f4850b0e76550370be06eee67bbc54">port</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Store any relevant client information here. */</span></div>
<div class="line">        <span class="keyword">event</span>.peer -&gt; <a class="code hl_variable" href="ut_default_i_o_stream_8cpp.html#a1f53032d52e71eb5758e52bd40a04bd0">data</a> = <span class="stringliteral">&quot;Client information&quot;</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="enet_8h.html#a3cf937b5cf72510493e0a7a2b71d3755a67d928ca38b289db53ec9f56c91c5d9d">ENET_EVENT_TYPE_RECEIVE</a>:</div>
<div class="line">        <a class="code hl_function" href="octave__test_8m.html#ac6d0e62c65e5715b13a5fcb381118888">printf</a> (<span class="stringliteral">&quot;A packet of length %u containing %s was received from %s on channel %u.\n&quot;</span>,</div>
<div class="line">                event.<a class="code hl_variable" href="struct___e_net_event.html#afb6303a5593fce6b9671efbc2ca1b5de">packet</a> -&gt; dataLength,</div>
<div class="line">                event.<a class="code hl_variable" href="struct___e_net_event.html#afb6303a5593fce6b9671efbc2ca1b5de">packet</a> -&gt; <a class="code hl_variable" href="ut_default_i_o_stream_8cpp.html#a1f53032d52e71eb5758e52bd40a04bd0">data</a>,</div>
<div class="line">                event.<a class="code hl_variable" href="struct___e_net_event.html#ac991d0db800bc1c70b56ad63f1670140">peer</a> -&gt; <a class="code hl_variable" href="ut_default_i_o_stream_8cpp.html#a1f53032d52e71eb5758e52bd40a04bd0">data</a>,</div>
<div class="line">                event.<a class="code hl_variable" href="struct___e_net_event.html#a9d82e67a0f26c05de4b39bc839cb36ec">channelID</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Clean up the packet now that we&#39;re done using it. */</span></div>
<div class="line">        <a class="code hl_function" href="group___packet.html#gab58895376ee4ade8f4e13761a44ba263">enet_packet_destroy</a> (event.<a class="code hl_variable" href="struct___e_net_event.html#afb6303a5593fce6b9671efbc2ca1b5de">packet</a>);</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">       </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="enet_8h.html#a3cf937b5cf72510493e0a7a2b71d3755a4fa47af84cf901810510aeba077a1c2f">ENET_EVENT_TYPE_DISCONNECT</a>:</div>
<div class="line">        <a class="code hl_function" href="octave__test_8m.html#ac6d0e62c65e5715b13a5fcb381118888">printf</a> (<span class="stringliteral">&quot;%s disconnected.\n&quot;</span>, event.<a class="code hl_variable" href="struct___e_net_event.html#ac991d0db800bc1c70b56ad63f1670140">peer</a> -&gt; <a class="code hl_variable" href="ut_default_i_o_stream_8cpp.html#a1f53032d52e71eb5758e52bd40a04bd0">data</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Reset the peer&#39;s client information. */</span></div>
<div class="line"> </div>
<div class="line">        <span class="keyword">event</span>.peer -&gt; <a class="code hl_variable" href="ut_default_i_o_stream_8cpp.html#a1f53032d52e71eb5758e52bd40a04bd0">data</a> = <a class="code hl_define" href="miniaudio_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line">...</div>
<div class="line">...</div>
<div class="line">...</div>
<div class="ttc" id="aenet_8h_html_a3cf937b5cf72510493e0a7a2b71d3755a4fa47af84cf901810510aeba077a1c2f"><div class="ttname"><a href="enet_8h.html#a3cf937b5cf72510493e0a7a2b71d3755a4fa47af84cf901810510aeba077a1c2f">ENET_EVENT_TYPE_DISCONNECT</a></div><div class="ttdeci">@ ENET_EVENT_TYPE_DISCONNECT</div><div class="ttdef"><b>Definition</b> enet.h:423</div></div>
<div class="ttc" id="aenet_8h_html_a3cf937b5cf72510493e0a7a2b71d3755a67d928ca38b289db53ec9f56c91c5d9d"><div class="ttname"><a href="enet_8h.html#a3cf937b5cf72510493e0a7a2b71d3755a67d928ca38b289db53ec9f56c91c5d9d">ENET_EVENT_TYPE_RECEIVE</a></div><div class="ttdeci">@ ENET_EVENT_TYPE_RECEIVE</div><div class="ttdef"><b>Definition</b> enet.h:431</div></div>
<div class="ttc" id="aenet_8h_html_a3cf937b5cf72510493e0a7a2b71d3755aefd9fa36297e41ca4c1cbcfdeb7e4a9d"><div class="ttname"><a href="enet_8h.html#a3cf937b5cf72510493e0a7a2b71d3755aefd9fa36297e41ca4c1cbcfdeb7e4a9d">ENET_EVENT_TYPE_CONNECT</a></div><div class="ttdeci">@ ENET_EVENT_TYPE_CONNECT</div><div class="ttdef"><b>Definition</b> enet.h:414</div></div>
<div class="ttc" id="agroup___packet_html_gab58895376ee4ade8f4e13761a44ba263"><div class="ttname"><a href="group___packet.html#gab58895376ee4ade8f4e13761a44ba263">enet_packet_destroy</a></div><div class="ttdeci">ENET_API void enet_packet_destroy(ENetPacket *)</div><div class="ttdef"><b>Definition</b> packet.c:57</div></div>
<div class="ttc" id="agroup__host_html_ga6ba501b3ee576e5578c8e6d1694ebd49"><div class="ttname"><a href="group__host.html#ga6ba501b3ee576e5578c8e6d1694ebd49">enet_host_service</a></div><div class="ttdeci">ENET_API int enet_host_service(ENetHost *, ENetEvent *, enet_uint32)</div><div class="ttdef"><b>Definition</b> protocol.c:1752</div></div>
<div class="ttc" id="aoctave__test_8m_html_ac6d0e62c65e5715b13a5fcb381118888"><div class="ttname"><a href="octave__test_8m.html#ac6d0e62c65e5715b13a5fcb381118888">printf</a></div><div class="ttdeci">printf(&quot;    Running Octave tests                     : &quot;)</div></div>
<div class="ttc" id="astruct___e_net_event_html"><div class="ttname"><a href="struct___e_net_event.html">_ENetEvent</a></div><div class="ttdef"><b>Definition</b> enet.h:440</div></div>
<div class="ttc" id="astruct___e_net_event_html_a53cd59a74e46de03e8f4b3fd47822d96"><div class="ttname"><a href="struct___e_net_event.html#a53cd59a74e46de03e8f4b3fd47822d96">_ENetEvent::type</a></div><div class="ttdeci">ENetEventType type</div><div class="ttdef"><b>Definition</b> enet.h:441</div></div>
<div class="ttc" id="astruct___e_net_event_html_a9d82e67a0f26c05de4b39bc839cb36ec"><div class="ttname"><a href="struct___e_net_event.html#a9d82e67a0f26c05de4b39bc839cb36ec">_ENetEvent::channelID</a></div><div class="ttdeci">enet_uint8 channelID</div><div class="ttdef"><b>Definition</b> enet.h:443</div></div>
<div class="ttc" id="astruct___e_net_event_html_ac991d0db800bc1c70b56ad63f1670140"><div class="ttname"><a href="struct___e_net_event.html#ac991d0db800bc1c70b56ad63f1670140">_ENetEvent::peer</a></div><div class="ttdeci">ENetPeer * peer</div><div class="ttdef"><b>Definition</b> enet.h:442</div></div>
<div class="ttc" id="astruct___e_net_event_html_afb6303a5593fce6b9671efbc2ca1b5de"><div class="ttname"><a href="struct___e_net_event.html#afb6303a5593fce6b9671efbc2ca1b5de">_ENetEvent::packet</a></div><div class="ttdeci">ENetPacket * packet</div><div class="ttdef"><b>Definition</b> enet.h:445</div></div>
<div class="ttc" id="aut_default_i_o_stream_8cpp_html_a1f53032d52e71eb5758e52bd40a04bd0"><div class="ttname"><a href="ut_default_i_o_stream_8cpp.html#a1f53032d52e71eb5758e52bd40a04bd0">data</a></div><div class="ttdeci">const char data[]</div><div class="ttdef"><b>Definition</b> utDefaultIOStream.cpp:54</div></div>
</div><!-- fragment --><h1><a class="anchor" id="SendingPacket"></a>
Sending a packet to an ENet peer <br  />
</h1>
<p>Packets in ENet are created with <a class="el" href="group___packet.html#gaee177babb047475fbde5ebbceda475cd">enet_packet_create()</a>, where the size of the packet must be specified. Optionally, initial data may be specified to copy into the packet.</p>
<p>Certain flags may also be supplied to <a class="el" href="group___packet.html#gaee177babb047475fbde5ebbceda475cd">enet_packet_create()</a> to control various packet features:</p>
<p>ENET_PACKET_FLAG_RELIABLE specifies that the packet must use reliable delivery. A reliable packet is guaranteed to be delivered, and a number of retry attempts will be made until an acknowledgement is received from the foreign host the packet is sent to. If a certain number of retry attempts is reached without any acknowledgement, ENet will assume the peer has disconnected and forcefully reset the connection. If this flag is not specified, the packet is assumed an unreliable packet, and no retry attempts will be made nor acknowledgements generated.</p>
<p>A packet may be resized (extended or truncated) with <a class="el" href="group___packet.html#ga0aee7f8c7e2d2c4b64f6d68d930155a8">enet_packet_resize()</a>.</p>
<p>A packet is sent to a foreign host with <a class="el" href="group__peer.html#gaf082a0ae58d9c435bed75c7325cf7290">enet_peer_send()</a>. <a class="el" href="group__peer.html#gaf082a0ae58d9c435bed75c7325cf7290">enet_peer_send()</a> accepts a channel id over which to send the packet to a given peer. Once the packet is handed over to ENet with <a class="el" href="group__peer.html#gaf082a0ae58d9c435bed75c7325cf7290">enet_peer_send()</a>, ENet will handle its deallocation and <a class="el" href="group___packet.html#gab58895376ee4ade8f4e13761a44ba263">enet_packet_destroy()</a> should not be used upon it.</p>
<p>One may also use <a class="el" href="group__host.html#ga5190a63f78eb0c15bd96cda44bf423c6">enet_host_broadcast()</a> to send a packet to all connected peers on a given host over a specified channel id, as with <a class="el" href="group__peer.html#gaf082a0ae58d9c435bed75c7325cf7290">enet_peer_send()</a>.</p>
<p>Queued packets will be sent on a call to <a class="el" href="group__host.html#ga6ba501b3ee576e5578c8e6d1694ebd49">enet_host_service()</a>. Alternatively, <a class="el" href="group__host.html#gac8f53bcdbd540043f87e7d59048559fa">enet_host_flush()</a> will send out queued packets without dispatching any events.</p>
<div class="fragment"><div class="line"><span class="comment">/* Create a reliable packet of size 7 containing &quot;packet\0&quot; */</span></div>
<div class="line"><a class="code hl_struct" href="struct___e_net_packet.html">ENetPacket</a> * packet = <a class="code hl_function" href="group___packet.html#gaee177babb047475fbde5ebbceda475cd">enet_packet_create</a> (<span class="stringliteral">&quot;packet&quot;</span>, </div>
<div class="line">                                          strlen (<span class="stringliteral">&quot;packet&quot;</span>) + 1, </div>
<div class="line">                                          <a class="code hl_enumvalue" href="enet_8h.html#a9d1fc0ce6da0a057f18bd8b9c762003daab20e7088245ab2ddb7f11dcc9433738">ENET_PACKET_FLAG_RELIABLE</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Extend the packet so and append the string &quot;foo&quot;, so it now */</span></div>
<div class="line"><span class="comment">/* contains &quot;packetfoo\0&quot;                                      */</span></div>
<div class="line"><a class="code hl_function" href="group___packet.html#ga0aee7f8c7e2d2c4b64f6d68d930155a8">enet_packet_resize</a> (packet, strlen (<span class="stringliteral">&quot;packetfoo&quot;</span>) + 1);</div>
<div class="line">strcpy (&amp; packet -&gt; <a class="code hl_variable" href="ut_default_i_o_stream_8cpp.html#a1f53032d52e71eb5758e52bd40a04bd0">data</a> [strlen (<span class="stringliteral">&quot;packet&quot;</span>)], <span class="stringliteral">&quot;foo&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Send the packet to the peer over channel id 0. */</span></div>
<div class="line"><span class="comment">/* One could also broadcast the packet by         */</span></div>
<div class="line"><span class="comment">/* enet_host_broadcast (host, 0, packet);         */</span></div>
<div class="line"><a class="code hl_function" href="group__peer.html#gaf082a0ae58d9c435bed75c7325cf7290">enet_peer_send</a> (peer, 0, packet);</div>
<div class="line">...</div>
<div class="line">...</div>
<div class="line">...</div>
<div class="line"><span class="comment">/* One could just use enet_host_service() instead. */</span></div>
<div class="line">enet_host_flush (host);</div>
<div class="ttc" id="aenet_8h_html_a9d1fc0ce6da0a057f18bd8b9c762003daab20e7088245ab2ddb7f11dcc9433738"><div class="ttname"><a href="enet_8h.html#a9d1fc0ce6da0a057f18bd8b9c762003daab20e7088245ab2ddb7f11dcc9433738">ENET_PACKET_FLAG_RELIABLE</a></div><div class="ttdeci">@ ENET_PACKET_FLAG_RELIABLE</div><div class="ttdef"><b>Definition</b> enet.h:108</div></div>
<div class="ttc" id="agroup___packet_html_ga0aee7f8c7e2d2c4b64f6d68d930155a8"><div class="ttname"><a href="group___packet.html#ga0aee7f8c7e2d2c4b64f6d68d930155a8">enet_packet_resize</a></div><div class="ttdeci">ENET_API int enet_packet_resize(ENetPacket *, size_t)</div><div class="ttdef"><b>Definition</b> packet.c:77</div></div>
<div class="ttc" id="agroup___packet_html_gaee177babb047475fbde5ebbceda475cd"><div class="ttname"><a href="group___packet.html#gaee177babb047475fbde5ebbceda475cd">enet_packet_create</a></div><div class="ttdeci">ENET_API ENetPacket * enet_packet_create(const void *, size_t, enet_uint32)</div><div class="ttdef"><b>Definition</b> packet.c:20</div></div>
<div class="ttc" id="agroup__peer_html_gaf082a0ae58d9c435bed75c7325cf7290"><div class="ttname"><a href="group__peer.html#gaf082a0ae58d9c435bed75c7325cf7290">enet_peer_send</a></div><div class="ttdeci">ENET_API int enet_peer_send(ENetPeer *, enet_uint8, ENetPacket *)</div><div class="ttdef"><b>Definition</b> peer.c:100</div></div>
<div class="ttc" id="astruct___e_net_packet_html"><div class="ttname"><a href="struct___e_net_packet.html">_ENetPacket</a></div><div class="ttdef"><b>Definition</b> enet.h:149</div></div>
</div><!-- fragment --><h1><a class="anchor" id="Disconnecting"></a>
Disconnecting an ENet peer</h1>
<p>Peers may be gently disconnected with <a class="el" href="group__peer.html#ga0e807704b6ecace5004c2cdcfbf813c2">enet_peer_disconnect()</a>. A disconnect request will be sent to the foreign host, and ENet will wait for an acknowledgement from the foreign host before finally disconnecting. An event of type ENET_EVENT_TYPE_DISCONNECT will be generated once the disconnection succeeds. Normally timeouts apply to the disconnect acknowledgement, and so if no acknowledgement is received after a length of time the peer will be forcefully disconnected.</p>
<p><a class="el" href="group__peer.html#ga9444dfff9574a7d21dbbdd34385a7d4d">enet_peer_reset()</a> will forcefully disconnect a peer. The foreign host will get no notification of a disconnect and will time out on the foreign host. No event is generated.</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="struct___e_net_event.html">ENetEvent</a> event;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="group__peer.html#ga0e807704b6ecace5004c2cdcfbf813c2">enet_peer_disconnect</a> (peer, 0);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Allow up to 3 seconds for the disconnect to succeed</span></div>
<div class="line"><span class="comment"> * and drop any packets received packets.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordflow">while</span> (<a class="code hl_function" href="group__host.html#ga6ba501b3ee576e5578c8e6d1694ebd49">enet_host_service</a> (client, &amp; event, 3000) &gt; 0)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span> (event.<a class="code hl_variable" href="struct___e_net_event.html#a53cd59a74e46de03e8f4b3fd47822d96">type</a>)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="enet_8h.html#a3cf937b5cf72510493e0a7a2b71d3755a67d928ca38b289db53ec9f56c91c5d9d">ENET_EVENT_TYPE_RECEIVE</a>:</div>
<div class="line">        <a class="code hl_function" href="group___packet.html#gab58895376ee4ade8f4e13761a44ba263">enet_packet_destroy</a> (event.<a class="code hl_variable" href="struct___e_net_event.html#afb6303a5593fce6b9671efbc2ca1b5de">packet</a>);</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="enet_8h.html#a3cf937b5cf72510493e0a7a2b71d3755a4fa47af84cf901810510aeba077a1c2f">ENET_EVENT_TYPE_DISCONNECT</a>:</div>
<div class="line">        puts (<span class="stringliteral">&quot;Disconnection succeeded.&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    ...</div>
<div class="line">    ...</div>
<div class="line">    ...</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* We&#39;ve arrived here, so the disconnect attempt didn&#39;t */</span></div>
<div class="line"><span class="comment">/* succeed yet.  Force the connection down.             */</span></div>
<div class="line"><a class="code hl_function" href="group__peer.html#ga9444dfff9574a7d21dbbdd34385a7d4d">enet_peer_reset</a> (peer);</div>
<div class="line">...</div>
<div class="line">...</div>
<div class="line">...</div>
<div class="ttc" id="agroup__peer_html_ga0e807704b6ecace5004c2cdcfbf813c2"><div class="ttname"><a href="group__peer.html#ga0e807704b6ecace5004c2cdcfbf813c2">enet_peer_disconnect</a></div><div class="ttdeci">ENET_API void enet_peer_disconnect(ENetPeer *, enet_uint32)</div><div class="ttdef"><b>Definition</b> peer.c:530</div></div>
<div class="ttc" id="agroup__peer_html_ga9444dfff9574a7d21dbbdd34385a7d4d"><div class="ttname"><a href="group__peer.html#ga9444dfff9574a7d21dbbdd34385a7d4d">enet_peer_reset</a></div><div class="ttdeci">ENET_API void enet_peer_reset(ENetPeer *)</div><div class="ttdef"><b>Definition</b> peer.c:374</div></div>
</div><!-- fragment --><h1><a class="anchor" id="Connecting"></a>
Connecting to an ENet host</h1>
<p>A connection to a foreign host is initiated with <a class="el" href="group__host.html#gaec1d41d703a0a6253e2f08da7bd4583d">enet_host_connect()</a>. It accepts the address of a foreign host to connect to, and the number of channels that should be allocated for communication. If N channels are allocated for use, their channel ids will be numbered 0 through N-1. A peer representing the connection attempt is returned, or NULL if there were no available peers over which to initiate the connection. When the connection attempt succeeds, an event of type ENET_EVENT_TYPE_CONNECT will be generated. If the connection attempt times out or otherwise fails, an event of type ENET_EVENT_TYPE_DISCONNECT will be generated.</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="struct___e_net_address.html">ENetAddress</a> address;</div>
<div class="line"><a class="code hl_struct" href="struct___e_net_event.html">ENetEvent</a> event;</div>
<div class="line"><a class="code hl_struct" href="struct___e_net_peer.html">ENetPeer</a> *peer;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Connect to some.server.net:1234. */</span></div>
<div class="line"><a class="code hl_function" href="group___address.html#ga32a6ae1ed3d7704858f237688e7384ee">enet_address_set_host</a> (&amp; address, <span class="stringliteral">&quot;some.server.net&quot;</span>);</div>
<div class="line">address.<a class="code hl_variable" href="struct___e_net_address.html#ad0f4850b0e76550370be06eee67bbc54">port</a> = 1234;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Initiate the connection, allocating the two channels 0 and 1. */</span></div>
<div class="line">peer = <a class="code hl_function" href="group__host.html#gaec1d41d703a0a6253e2f08da7bd4583d">enet_host_connect</a> (client, &amp; address, 2, 0);    </div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (peer == <a class="code hl_define" href="miniaudio_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line">{</div>
<div class="line">   fprintf (stderr, </div>
<div class="line">            <span class="stringliteral">&quot;No available peers for initiating an ENet connection.\n&quot;</span>);</div>
<div class="line">   exit (EXIT_FAILURE);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Wait up to 5 seconds for the connection attempt to succeed. */</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="group__host.html#ga6ba501b3ee576e5578c8e6d1694ebd49">enet_host_service</a> (client, &amp; event, 5000) &gt; 0 &amp;&amp;</div>
<div class="line">    event.<a class="code hl_variable" href="struct___e_net_event.html#a53cd59a74e46de03e8f4b3fd47822d96">type</a> == <a class="code hl_enumvalue" href="enet_8h.html#a3cf937b5cf72510493e0a7a2b71d3755aefd9fa36297e41ca4c1cbcfdeb7e4a9d">ENET_EVENT_TYPE_CONNECT</a>)</div>
<div class="line">{</div>
<div class="line">    puts (<span class="stringliteral">&quot;Connection to some.server.net:1234 succeeded.&quot;</span>);</div>
<div class="line">    ...</div>
<div class="line">    ...</div>
<div class="line">    ...</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* Either the 5 seconds are up or a disconnect event was */</span></div>
<div class="line">    <span class="comment">/* received. Reset the peer in the event the 5 seconds   */</span></div>
<div class="line">    <span class="comment">/* had run out without any significant event.            */</span></div>
<div class="line">    <a class="code hl_function" href="group__peer.html#ga9444dfff9574a7d21dbbdd34385a7d4d">enet_peer_reset</a> (peer);</div>
<div class="line"> </div>
<div class="line">    puts (<span class="stringliteral">&quot;Connection to some.server.net:1234 failed.&quot;</span>);</div>
<div class="line">}</div>
<div class="line">...</div>
<div class="line">...</div>
<div class="line">...</div>
<div class="ttc" id="agroup___address_html_ga32a6ae1ed3d7704858f237688e7384ee"><div class="ttname"><a href="group___address.html#ga32a6ae1ed3d7704858f237688e7384ee">enet_address_set_host</a></div><div class="ttdeci">ENET_API int enet_address_set_host(ENetAddress *address, const char *hostName)</div><div class="ttdef"><b>Definition</b> unix.c:117</div></div>
<div class="ttc" id="agroup__host_html_gaec1d41d703a0a6253e2f08da7bd4583d"><div class="ttname"><a href="group__host.html#gaec1d41d703a0a6253e2f08da7bd4583d">enet_host_connect</a></div><div class="ttdeci">ENetPeer * enet_host_connect(ENetHost *host, const ENetAddress *address, size_t channelCount, enet_uint32 data)</div><div class="ttdef"><b>Definition</b> host.c:173</div></div>
<div class="ttc" id="astruct___e_net_peer_html"><div class="ttname"><a href="struct___e_net_peer.html">_ENetPeer</a></div><div class="ttdef"><b>Definition</b> enet.h:264</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
